# fly.toml app configuration file generated for play-vtm7ea on 2025-09-21T14:46:08Z
# Can be found at https://play-vtm7ea.fly.dev
#
# See https://fly.io/docs/reference/configuration/ for information about how to use this file.
#
# To enable polling, set ENABLE_POLLER=true in the environment variables.
# /Users/zellaking/.fly/bin/flyctl secrets set ENABLE_POLLER=true POLL_MS=120000
#
#  To see logs
# /Users/zellaking/.fly/bin/flyctl logs --no-tail

app = 'play-vtm7ea'
primary_region = 'lhr'

[build]

[http_service]
auto_start_machines = false
auto_stop_machines = "off"
force_https = true
internal_port = 3000
min_machines_running = 1
processes = ['app']

[[http_service.checks]]
grace_period = '5s'
interval = '10s'
method = 'get'
path = '/api/health'
protocol = 'http'
timeout = '2s'

[env]
LDBWS_BASE_URL = "https://api1.raildata.org.uk/1010-live-departure-board-dep1_2"
NEXTDEPS_BASE_URL = "https://api1.raildata.org.uk/1010-live-next-departure-board1_1"
NODE_ENV = "production"
PORT = "3000"

[[vm]]
cpu_kind = 'shared'
cpus = 1
memory = '1gb'
memory_mb = 1024

[[mounts]]
destination = "/app/data"
source = "data"
